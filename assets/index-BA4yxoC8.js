(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();let a;function g(e){const t=a.__externref_table_alloc();return a.__wbindgen_export_2.set(t,e),t}function _(e,t){try{return e.apply(this,t)}catch(n){const o=g(n);a.__wbindgen_exn_store(o)}}const L=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&L.decode();let f=null;function m(){return f!==null&&f.byteLength!==0||(f=new Uint8Array(a.memory.buffer)),f}function p(e,t){return e>>>=0,L.decode(m().subarray(e,e+t))}function w(e){return e==null}let b=0;const h=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},S=typeof h.encodeInto=="function"?function(e,t){return h.encodeInto(e,t)}:function(e,t){const n=h.encode(e);return t.set(n),{read:e.length,written:n.length}};function v(e,t,n){if(n===void 0){const l=h.encode(e),d=t(l.length,1)>>>0;return m().subarray(d,d+l.length).set(l),b=l.length,d}let o=e.length,s=t(o,1)>>>0;const i=m();let c=0;for(;c<o;c++){const l=e.charCodeAt(c);if(l>127)break;i[s+c]=l}if(c!==o){c!==0&&(e=e.slice(c)),s=n(s,o,o=c+3*e.length,1)>>>0;const l=m().subarray(s+c,s+o);c+=S(e,l).written,s=n(s,o,c,1)>>>0}return b=c,s}function K(e){const t=a.__wbindgen_export_2.get(e);return a.__externref_table_dealloc(e),t}const y=Object.freeze({Aes128:0,0:"Aes128",Base64:1,1:"Base64",Rot13:2,2:"Rot13",Xor:3,3:"Xor",Caesar:4,4:"Caesar"}),k=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>a.__wbg_cryptowasm_free(e>>>0,1));class R{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,k.unregister(this),t}free(){const t=this.__destroy_into_raw();a.__wbg_cryptowasm_free(t,0)}constructor(t,n){const o=v(t,a.__wbindgen_malloc,a.__wbindgen_realloc),s=b,i=a.cryptowasm_new(o,s,n);return this.__wbg_ptr=i>>>0,k.register(this,this.__wbg_ptr,this),this}cypher(t){let n,o;try{const s=v(t,a.__wbindgen_malloc,a.__wbindgen_realloc),i=b,c=a.cryptowasm_cypher(this.__wbg_ptr,s,i);return n=c[0],o=c[1],p(c[0],c[1])}finally{a.__wbindgen_free(n,o,1)}}decypher(t){let n,o;try{const c=v(t,a.__wbindgen_malloc,a.__wbindgen_realloc),l=b,d=a.cryptowasm_decypher(this.__wbg_ptr,c,l);var s=d[0],i=d[1];if(d[3])throw s=0,i=0,K(d[2]);return n=s,o=i,p(s,i)}finally{a.__wbindgen_free(n,o,1)}}}async function N(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(o){if(e.headers.get("Content-Type")=="application/wasm")throw o;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function F(){const e={wbg:{}};return e.wbg.__wbg_buffer_609cc3eee51ed158=function(t){return t.buffer},e.wbg.__wbg_call_672a4d21634d4a24=function(){return _(function(t,n){return t.call(n)},arguments)},e.wbg.__wbg_call_7cccdd69e0791ae2=function(){return _(function(t,n,o){return t.call(n,o)},arguments)},e.wbg.__wbg_crypto_ed58b8e10a292839=function(t){return t.crypto},e.wbg.__wbg_getRandomValues_bcb4912f16000dc4=function(){return _(function(t,n){t.getRandomValues(n)},arguments)},e.wbg.__wbg_msCrypto_0a36e2ec3a343d26=function(t){return t.msCrypto},e.wbg.__wbg_new_a12002a7f91c75be=function(t){return new Uint8Array(t)},e.wbg.__wbg_newnoargs_105ed471475aaf50=function(t,n){return new Function(p(t,n))},e.wbg.__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a=function(t,n,o){return new Uint8Array(t,n>>>0,o>>>0)},e.wbg.__wbg_newwithlength_a381634e90c276d4=function(t){return new Uint8Array(t>>>0)},e.wbg.__wbg_node_02999533c4ea02e3=function(t){return t.node},e.wbg.__wbg_process_5c1d670bc53614b8=function(t){return t.process},e.wbg.__wbg_randomFillSync_ab2cfe79ebbf2740=function(){return _(function(t,n){t.randomFillSync(n)},arguments)},e.wbg.__wbg_require_79b1e9274cde3c87=function(){return _(function(){return module.require},arguments)},e.wbg.__wbg_set_65595bdd868b3009=function(t,n,o){t.set(n,o>>>0)},e.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){const t=typeof global>"u"?null:global;return w(t)?0:g(t)},e.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){const t=typeof globalThis>"u"?null:globalThis;return w(t)?0:g(t)},e.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){const t=typeof self>"u"?null:self;return w(t)?0:g(t)},e.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){const t=typeof window>"u"?null:window;return w(t)?0:g(t)},e.wbg.__wbg_subarray_aa9065fa9dc5df96=function(t,n,o){return t.subarray(n>>>0,o>>>0)},e.wbg.__wbg_versions_c71aa1626a93e0a1=function(t){return t.versions},e.wbg.__wbindgen_init_externref_table=function(){const t=a.__wbindgen_export_2,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)},e.wbg.__wbindgen_is_function=function(t){return typeof t=="function"},e.wbg.__wbindgen_is_object=function(t){return typeof t=="object"&&t!==null},e.wbg.__wbindgen_is_string=function(t){return typeof t=="string"},e.wbg.__wbindgen_is_undefined=function(t){return t===void 0},e.wbg.__wbindgen_memory=function(){return a.memory},e.wbg.__wbindgen_string_new=function(t,n){return p(t,n)},e.wbg.__wbindgen_throw=function(t,n){throw new Error(p(t,n))},e}function W(e,t){return a=e.exports,B.__wbindgen_wasm_module=t,f=null,a.__wbindgen_start(),a}async function B(e){if(a!==void 0)return a;e!==void 0&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),e===void 0&&(e=new URL("/assets/crypto_wasm_bg-CNMP41uJ.wasm",import.meta.url));const t=F();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:o}=await N(await e,t);return W(n,o)}const r={loadingOverlay:document.getElementById("loadingOverlay"),statusMessage:document.getElementById("statusMessage"),statusIcon:document.getElementById("statusIcon"),statusText:document.getElementById("statusText"),encryptorType:document.getElementById("encryptorType"),secretKey:document.getElementById("secretKey"),keyLength:document.getElementById("keyLength"),keyToggle:document.getElementById("keyToggle"),keyGroup:document.getElementById("keyGroup"),inputToken:document.getElementById("inputToken"),outputToken:document.getElementById("outputToken"),encryptButton:document.getElementById("encryptButton"),decryptButton:document.getElementById("decryptButton"),swapButton:document.getElementById("swapButton"),clearInput:document.getElementById("clearInput"),clearOutput:document.getElementById("clearOutput"),pasteInput:document.getElementById("pasteInput"),copyOutput:document.getElementById("copyOutput")};let O=!1;const u=(e,t="error")=>{r.statusMessage.className=`status-message ${t}`,r.statusIcon.textContent=t==="error"?"âš ï¸":"âœ…",r.statusText.textContent=e},T=()=>{r.statusMessage.className="status-message"},E=()=>{const e=r.encryptorType.value,t=r.secretKey.value,n=t.length;if(e==="aes128")r.keyLength.textContent=`${n}/16`,r.keyLength.className=`key-length ${n===16?"valid":"invalid"}`;else if(e==="xor")r.keyLength.textContent=`${n} chars`,r.keyLength.className=`key-length ${n>0?"valid":"invalid"}`;else if(e==="caesar"){const o=parseInt(t,10),s=!isNaN(o)&&o>=1&&o<=25;r.keyLength.textContent=s?`shift ${o}`:"invalid",r.keyLength.className=`key-length ${s?"valid":"invalid"}`}else r.keyLength.textContent="",r.keyLength.className="key-length"},M=(e,t)=>{e.classList.add(t),setTimeout(()=>e.classList.remove(t),1e3)},$=async(e,t)=>{try{await navigator.clipboard.writeText(e),M(t,"copied")}catch{u("Failed to copy to clipboard","error")}},C=e=>/^[\x20-\x7E]*$/.test(e),A=()=>{if(!O)return u("Crypto module not initialized","error"),null;const e=r.encryptorType.value,t=r.secretKey.value;if(e==="aes128"&&t.length!==16)return u("Secret key must be exactly 16 characters for AES-128","error"),null;if(e==="xor"&&t.length===0)return u("XOR cipher requires a non-empty key","error"),null;if(e==="caesar"){const n=parseInt(t,10);if(isNaN(n)||n<1||n>25)return u("Caesar cipher requires a shift between 1 and 25","error"),null}try{T();let n;return e==="aes128"?n=y.Aes128:e==="rot13"?n=y.Rot13:e==="xor"?n=y.Xor:e==="caesar"?n=y.Caesar:n=y.Base64,new R(t,n)}catch(n){const o=n instanceof Error?n.message:String(n);return u(`Failed to create crypto instance: ${o}`,"error"),null}},x=()=>{const e=r.inputToken.value.trim();if(!e){u("Please enter text to encrypt","error");return}if(r.encryptorType.value==="rot13"&&!C(e)){u("ROT13 only supports ASCII characters (letters, numbers, punctuation)","error");return}const t=A();if(t)try{const n=t.cypher(e);r.outputToken.value=n,T()}catch(n){const o=n instanceof Error?n.message:String(n);u(`Encryption failed: ${o}`,"error")}finally{t.free()}},I=()=>{const e=r.inputToken.value.trim();if(!e){u("Please enter text to decrypt","error");return}if(r.encryptorType.value==="rot13"&&!C(e)){u("ROT13 only supports ASCII characters (letters, numbers, punctuation)","error");return}const t=A();if(t)try{const n=t.decypher(e);r.outputToken.value=n,T()}catch(n){const o=n instanceof Error?n.message:String(n);u(`Decryption failed: ${o}`,"error")}finally{t.free()}},z=()=>{const e=r.outputToken.value;r.inputToken.value=e,r.outputToken.value=""},P=()=>{r.encryptorType.addEventListener("change",e=>{const t=e.target,n=r.keyGroup.querySelector(".form-label");t.value==="base64"||t.value==="rot13"?r.keyGroup.style.display="none":(r.keyGroup.style.display="flex",t.value==="aes128"?(n.textContent="Secret Key (16 characters)",r.secretKey.placeholder="Enter 16-character key",r.secretKey.value="thisisasecretkey"):t.value==="xor"?(n.textContent="XOR Key (any length)",r.secretKey.placeholder="Enter any key",r.secretKey.value="secret"):t.value==="caesar"&&(n.textContent="Shift (1-25)",r.secretKey.placeholder="Enter shift number",r.secretKey.value="3"),E())}),r.secretKey.addEventListener("input",E),r.keyToggle.addEventListener("click",()=>{const e=r.secretKey.type==="password";r.secretKey.type=e?"text":"password",r.keyToggle.textContent=e?"ðŸ™ˆ":"ðŸ‘ï¸"}),r.encryptButton.addEventListener("click",x),r.decryptButton.addEventListener("click",I),r.swapButton.addEventListener("click",z),r.clearInput.addEventListener("click",()=>{r.inputToken.value=""}),r.clearOutput.addEventListener("click",()=>{r.outputToken.value=""}),r.pasteInput.addEventListener("click",async()=>{try{const e=await navigator.clipboard.readText();r.inputToken.value=e}catch{u("Failed to paste from clipboard","error")}}),r.copyOutput.addEventListener("click",()=>{const e=r.outputToken.value;e&&$(e,r.copyOutput)}),document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&e.key==="Enter"&&(e.preventDefault(),e.shiftKey?I():x())})},U=async()=>{try{await B(),O=!0,P(),E(),r.loadingOverlay.classList.add("hidden"),console.log("crypto.wasm demo initialized successfully!")}catch(e){r.loadingOverlay.classList.add("hidden");const t=e instanceof Error?e.message:String(e);u(`Failed to initialize: ${t}`,"error"),console.error("Initialization error:",e)}};U();
