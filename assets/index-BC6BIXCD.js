(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();let c;function g(e){const t=c.__externref_table_alloc();return c.__wbindgen_export_2.set(t,e),t}function _(e,t){try{return e.apply(this,t)}catch(n){const r=g(n);c.__wbindgen_exn_store(r)}}const L=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&L.decode();let y=null;function b(){return y!==null&&y.byteLength!==0||(y=new Uint8Array(c.memory.buffer)),y}function f(e,t){return e>>>=0,L.decode(b().subarray(e,e+t))}function w(e){return e==null}let p=0;const m=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},S=typeof m.encodeInto=="function"?function(e,t){return m.encodeInto(e,t)}:function(e,t){const n=m.encode(e);return t.set(n),{read:e.length,written:n.length}};function h(e,t,n){if(n===void 0){const u=m.encode(e),d=t(u.length,1)>>>0;return b().subarray(d,d+u.length).set(u),p=u.length,d}let r=e.length,s=t(r,1)>>>0;const a=b();let i=0;for(;i<r;i++){const u=e.charCodeAt(i);if(u>127)break;a[s+i]=u}if(i!==r){i!==0&&(e=e.slice(i)),s=n(s,r,r=i+3*e.length,1)>>>0;const u=b().subarray(s+i,s+r);i+=S(e,u).written,s=n(s,r,i,1)>>>0}return p=i,s}function F(e){const t=c.__wbindgen_export_2.get(e);return c.__externref_table_dealloc(e),t}const E=Object.freeze({Aes128:0,0:"Aes128",Base64:1,1:"Base64"}),T=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>c.__wbg_cryptowasm_free(e>>>0,1));class W{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,T.unregister(this),t}free(){const t=this.__destroy_into_raw();c.__wbg_cryptowasm_free(t,0)}constructor(t,n){const r=h(t,c.__wbindgen_malloc,c.__wbindgen_realloc),s=p,a=c.cryptowasm_new(r,s,n);return this.__wbg_ptr=a>>>0,T.register(this,this.__wbg_ptr,this),this}cypher(t){let n,r;try{const s=h(t,c.__wbindgen_malloc,c.__wbindgen_realloc),a=p,i=c.cryptowasm_cypher(this.__wbg_ptr,s,a);return n=i[0],r=i[1],f(i[0],i[1])}finally{c.__wbindgen_free(n,r,1)}}decypher(t){let n,r;try{const i=h(t,c.__wbindgen_malloc,c.__wbindgen_realloc),u=p,d=c.cryptowasm_decypher(this.__wbg_ptr,i,u);var s=d[0],a=d[1];if(d[3])throw s=0,a=0,F(d[2]);return n=s,r=a,f(s,a)}finally{c.__wbindgen_free(n,r,1)}}}async function C(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(r){if(e.headers.get("Content-Type")=="application/wasm")throw r;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function z(){const e={wbg:{}};return e.wbg.__wbg_buffer_609cc3eee51ed158=function(t){return t.buffer},e.wbg.__wbg_call_672a4d21634d4a24=function(){return _(function(t,n){return t.call(n)},arguments)},e.wbg.__wbg_call_7cccdd69e0791ae2=function(){return _(function(t,n,r){return t.call(n,r)},arguments)},e.wbg.__wbg_crypto_ed58b8e10a292839=function(t){return t.crypto},e.wbg.__wbg_getRandomValues_bcb4912f16000dc4=function(){return _(function(t,n){t.getRandomValues(n)},arguments)},e.wbg.__wbg_msCrypto_0a36e2ec3a343d26=function(t){return t.msCrypto},e.wbg.__wbg_new_a12002a7f91c75be=function(t){return new Uint8Array(t)},e.wbg.__wbg_newnoargs_105ed471475aaf50=function(t,n){return new Function(f(t,n))},e.wbg.__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a=function(t,n,r){return new Uint8Array(t,n>>>0,r>>>0)},e.wbg.__wbg_newwithlength_a381634e90c276d4=function(t){return new Uint8Array(t>>>0)},e.wbg.__wbg_node_02999533c4ea02e3=function(t){return t.node},e.wbg.__wbg_process_5c1d670bc53614b8=function(t){return t.process},e.wbg.__wbg_randomFillSync_ab2cfe79ebbf2740=function(){return _(function(t,n){t.randomFillSync(n)},arguments)},e.wbg.__wbg_require_79b1e9274cde3c87=function(){return _(function(){return module.require},arguments)},e.wbg.__wbg_set_65595bdd868b3009=function(t,n,r){t.set(n,r>>>0)},e.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){const t=typeof global>"u"?null:global;return w(t)?0:g(t)},e.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){const t=typeof globalThis>"u"?null:globalThis;return w(t)?0:g(t)},e.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){const t=typeof self>"u"?null:self;return w(t)?0:g(t)},e.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){const t=typeof window>"u"?null:window;return w(t)?0:g(t)},e.wbg.__wbg_subarray_aa9065fa9dc5df96=function(t,n,r){return t.subarray(n>>>0,r>>>0)},e.wbg.__wbg_versions_c71aa1626a93e0a1=function(t){return t.versions},e.wbg.__wbindgen_init_externref_table=function(){const t=c.__wbindgen_export_2,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)},e.wbg.__wbindgen_is_function=function(t){return typeof t=="function"},e.wbg.__wbindgen_is_object=function(t){return typeof t=="object"&&t!==null},e.wbg.__wbindgen_is_string=function(t){return typeof t=="string"},e.wbg.__wbindgen_is_undefined=function(t){return t===void 0},e.wbg.__wbindgen_memory=function(){return c.memory},e.wbg.__wbindgen_string_new=function(t,n){return f(t,n)},e.wbg.__wbindgen_throw=function(t,n){throw new Error(f(t,n))},e}function K(e,t){return c=e.exports,x.__wbindgen_wasm_module=t,y=null,c.__wbindgen_start(),c}async function x(e){if(c!==void 0)return c;e!==void 0&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),e===void 0&&(e=new URL("/assets/crypto_wasm_bg-zstT4j1G.wasm",import.meta.url));const t=z();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:r}=await C(await e,t);return K(n,r)}const o={loadingOverlay:document.getElementById("loadingOverlay"),statusMessage:document.getElementById("statusMessage"),statusIcon:document.getElementById("statusIcon"),statusText:document.getElementById("statusText"),encryptorType:document.getElementById("encryptorType"),secretKey:document.getElementById("secretKey"),keyLength:document.getElementById("keyLength"),keyToggle:document.getElementById("keyToggle"),keyGroup:document.getElementById("keyGroup"),inputToken:document.getElementById("inputToken"),outputToken:document.getElementById("outputToken"),encryptButton:document.getElementById("encryptButton"),decryptButton:document.getElementById("decryptButton"),swapButton:document.getElementById("swapButton"),clearInput:document.getElementById("clearInput"),clearOutput:document.getElementById("clearOutput"),pasteInput:document.getElementById("pasteInput"),copyOutput:document.getElementById("copyOutput")};let B=!1;const l=(e,t="error")=>{o.statusMessage.className=`status-message ${t}`,o.statusIcon.textContent=t==="error"?"âš ï¸":"âœ…",o.statusText.textContent=e},v=()=>{o.statusMessage.className="status-message"},O=()=>{const e=o.secretKey.value.length;o.keyLength.textContent=`${e}/16`,o.keyLength.className=`key-length ${e===16?"valid":"invalid"}`},R=(e,t)=>{e.classList.add(t),setTimeout(()=>e.classList.remove(t),1e3)},M=async(e,t)=>{try{await navigator.clipboard.writeText(e),R(t,"copied")}catch{l("Failed to copy to clipboard","error")}},A=()=>{if(!B)return l("Crypto module not initialized","error"),null;const e=o.encryptorType.value,t=o.secretKey.value;if(e==="aes128"&&t.length!==16)return l("Secret key must be exactly 16 characters for AES-128","error"),null;try{v();const n=e==="aes128"?E.Aes128:E.Base64;return new W(t,n)}catch(n){const r=n instanceof Error?n.message:String(n);return l(`Failed to create crypto instance: ${r}`,"error"),null}},k=()=>{const e=o.inputToken.value.trim();if(!e){l("Please enter text to encrypt","error");return}const t=A();if(t)try{const n=t.cypher(e);o.outputToken.value=n,v()}catch(n){const r=n instanceof Error?n.message:String(n);l(`Encryption failed: ${r}`,"error")}finally{t.free()}},I=()=>{const e=o.inputToken.value.trim();if(!e){l("Please enter text to decrypt","error");return}const t=A();if(t)try{const n=t.decypher(e);o.outputToken.value=n,v()}catch(n){const r=n instanceof Error?n.message:String(n);l(`Decryption failed: ${r}`,"error")}finally{t.free()}},U=()=>{const e=o.outputToken.value;o.inputToken.value=e,o.outputToken.value=""},D=()=>{o.encryptorType.addEventListener("change",e=>{const t=e.target;o.keyGroup.style.display=t.value==="base64"?"none":"flex"}),o.secretKey.addEventListener("input",O),o.keyToggle.addEventListener("click",()=>{const e=o.secretKey.type==="password";o.secretKey.type=e?"text":"password",o.keyToggle.textContent=e?"ðŸ™ˆ":"ðŸ‘ï¸"}),o.encryptButton.addEventListener("click",k),o.decryptButton.addEventListener("click",I),o.swapButton.addEventListener("click",U),o.clearInput.addEventListener("click",()=>{o.inputToken.value=""}),o.clearOutput.addEventListener("click",()=>{o.outputToken.value=""}),o.pasteInput.addEventListener("click",async()=>{try{const e=await navigator.clipboard.readText();o.inputToken.value=e}catch{l("Failed to paste from clipboard","error")}}),o.copyOutput.addEventListener("click",()=>{const e=o.outputToken.value;e&&M(e,o.copyOutput)}),document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&e.key==="Enter"&&(e.preventDefault(),e.shiftKey?I():k())})},N=async()=>{try{await x(),B=!0,D(),O(),o.loadingOverlay.classList.add("hidden"),console.log("crypto.wasm demo initialized successfully!")}catch(e){o.loadingOverlay.classList.add("hidden");const t=e instanceof Error?e.message:String(e);l(`Failed to initialize: ${t}`,"error"),console.error("Initialization error:",e)}};N();
